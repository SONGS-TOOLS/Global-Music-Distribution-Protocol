(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559,586],{91586:function(){},91506:function(t,n,e){"use strict";e.d(n,{SIWEController:function(){return o},getDidAddress:function(){return s.NmC},getDidChainId:function(){return s.ZzI}});var i=e(58946);e(69210),RegExp("Chain ID: (?<temp1>\\d+)","u");var s=e(25001),a=e(84869),r=e(2847);let l=(0,r.sj)({status:"uninitialized"}),o={state:l,subscribeKey:(t,n)=>(0,a.VW)(l,t,n),subscribe:t=>(0,r.Ld)(l,()=>t(l)),_getClient(){if(!l._client)throw Error("SIWEController client not set");return l._client},async getNonce(t){let n=this._getClient(),e=await n.getNonce(t);return this.setNonce(e),e},async getSession(){try{let t=this._getClient(),n=await t.getSession();return n&&(this.setSession(n),this.setStatus("success")),n}catch(t){return}},createMessage(t){let n=this._getClient().createMessage(t);return this.setMessage(n),n},async verifyMessage(t){let n=this._getClient();return await n.verifyMessage(t)},async signIn(){let t=this._getClient();return await t.signIn()},async signOut(){var t;let n=this._getClient();await n.signOut(),this.setStatus("ready"),this.setSession(void 0),null===(t=n.onSignOut)||void 0===t||t.call(n)},onSignIn(t){var n;let e=this._getClient();null===(n=e.onSignIn)||void 0===n||n.call(e,t)},onSignOut(){var t;let n=this._getClient();null===(t=n.onSignOut)||void 0===t||t.call(n)},setSIWEClient(t){l._client=(0,r.iH)(t),l.status="ready",i.OptionsController.setIsSiweEnabled(t.options.enabled)},setNonce(t){l.nonce=t},setStatus(t){l.status=t},setMessage(t){l.message=t},setSession(t){l.session=t,l.status=t?"success":"ready"}};var c=e(6021),u=e(55884),d=e(17207);function g(){let t=(0,c._)(["\n  :host {\n    display: flex;\n    justify-content: center;\n    gap: var(--wui-spacing-2xl);\n  }\n\n  wui-visual-thumbnail:nth-child(1) {\n    z-index: 1;\n  }\n"]);return g=function(){return t},t}var h=(0,d.iv)(g());function p(){let t=(0,c._)(["\n      <wui-visual-thumbnail\n        ?borderRadiusFull=","\n        .imageSrc=","\n      ></wui-visual-thumbnail>\n      <wui-visual-thumbnail .imageSrc=","></wui-visual-thumbnail>\n    "]);return p=function(){return t},t}let w=class extends d.oi{firstUpdated(){var t;let n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll("wui-visual-thumbnail");(null==n?void 0:n[0])&&this.createAnimation(n[0],"translate(18px)"),(null==n?void 0:n[1])&&this.createAnimation(n[1],"translate(-18px)")}render(){var t;return(0,d.dy)(p(),!0,null===(t=this.dappImageUrl)||void 0===t?void 0:t[0],this.walletImageUrl)}createAnimation(t,n){t.animate([{transform:"translateX(0px)"},{transform:n}],{duration:1600,easing:"cubic-bezier(0.56, 0, 0.48, 1)",direction:"alternate",iterations:1/0})}constructor(){var t;super(...arguments),this.dappImageUrl=null===(t=i.OptionsController.state.metadata)||void 0===t?void 0:t.icons,this.walletImageUrl=i.MO.getConnectedWalletImageUrl()}};w.styles=h,w=function(t,n,e,i){var s,a=arguments.length,r=a<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,e,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(r=(a<3?s(r):a>3?s(n,e,r):s(n,e))||r);return a>3&&r&&Object.defineProperty(n,e,r),r}([(0,u.customElement)("w3m-connecting-siwe")],w);var f=e(67130),v=e(79078);function S(){let t=(0,c._)(['\n      <wui-flex justifyContent="center" .padding=',">\n        <w3m-connecting-siwe></w3m-connecting-siwe>\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="paragraph-500" align="center" color="fg-100"\n          >'," needs to connect to your wallet</wui-text\n        >\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="small-400" align="center" color="fg-200"\n          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect\n          you.</wui-text\n        >\n      </wui-flex>\n      <wui-flex .padding=',' gap="s" justifyContent="space-between">\n        <wui-button\n          size="lg"\n          borderRadius="xs"\n          fullWidth\n          variant="neutral"\n          @click=','\n          data-testid="w3m-connecting-siwe-cancel"\n        >\n          Cancel\n        </wui-button>\n        <wui-button\n          size="lg"\n          borderRadius="xs"\n          fullWidth\n          variant="main"\n          @click=',"\n          ?loading=",'\n          data-testid="w3m-connecting-siwe-sign"\n        >\n          ',"\n        </wui-button>\n      </wui-flex>\n    "]);return S=function(){return t},t}var C=function(t,n,e,i){var s,a=arguments.length,r=a<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,e,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(r=(a<3?s(r):a>3?s(n,e,r):s(n,e))||r);return a>3&&r&&Object.defineProperty(n,e,r),r};let y=class extends d.oi{render(){var t;return this.onRender(),(0,d.dy)(S(),["2xl","0","xxl","0"],["0","4xl","l","4xl"],null!==(t=this.dappName)&&void 0!==t?t:"Dapp",["0","3xl","l","3xl"],["l","xl","xl","xl"],this.onCancel.bind(this),this.onSign.bind(this),this.isSigning,this.isSigning?"Signing...":"Sign")}onRender(){o.state.session&&i.IN.close()}async onSign(){this.isSigning=!0,i.Xs.sendEvent({event:"CLICK_SIGN_SIWE_MESSAGE",type:"track"});try{o.setStatus("loading");let t=await o.signIn();return o.setStatus("success"),i.Xs.sendEvent({event:"SIWE_AUTH_SUCCESS",type:"track"}),t}catch(t){return i.AccountController.state.preferredAccountType===v.y_.ACCOUNT_TYPES.SMART_ACCOUNT?i.SnackController.showError("This application might not support Smart Accounts"):i.SnackController.showError("Signature declined"),o.setStatus("error"),i.Xs.sendEvent({event:"SIWE_AUTH_ERROR",type:"track"})}finally{this.isSigning=!1}}async onCancel(){let{isConnected:t}=i.AccountController.state;t?(await i.ConnectionController.disconnect(),i.IN.close()):i.RouterController.push("Connect"),i.Xs.sendEvent({event:"CLICK_CANCEL_SIWE",type:"track"})}constructor(){var t;super(...arguments),this.dappName=null===(t=i.OptionsController.state.metadata)||void 0===t?void 0:t.name,this.isSigning=!1}};C([(0,f.SB)()],y.prototype,"isSigning",void 0),C([(0,u.customElement)("w3m-connecting-siwe-view")],y)},99223:function(t,n,e){"use strict";e(322),e(55821)}}]);